<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../src/matematicas.js"></script>
    <title>Ejercicio 1</title>
    <script>
        let array = [];

        function iniciar() {
            document.getElementById("gen").addEventListener("click", generarArray);
            document.getElementById("visMayor").addEventListener("click", mostrarMayor);
            document.getElementById("orden").addEventListener("click", ordenarArray);
            document.getElementById("buscar").addEventListener("click", buscarenArray);
            document.getElementById("borrar").addEventListener("click", borrarEl);
            document.getElementById("invert").addEventListener("click", invertirOrden);
            document.getElementById("rotar").addEventListener("click", rotarEl);
            document.getElementById("nuevoSinRepe").addEventListener("click", nuevoArraysinRepe);
        }

        function generarArray() {
            if (array.length == 0) {
                //Preguntamos al usuario el tamaño
                let cant = parseInt(prompt("¿De que tamaño quieres el array?"));

                if (isNaN(cant)) {
                    alert("No me has pasado numero");
                } else {
                    for (let i = 0; i < cant; i++) {
                        array[i] = random(1, 50); // a cada posicion hasta cantidad hacemos un random (sacado de libreria matematicas)
                    }
                    alert("Array de tamanio " + cant + " creado");
                }
            } else {
                alert("Ya se ha creado el array");
            }
        }

        function mostrarMayor() {
            if (array.length == 0) {
                alert("No se ha generado el array");
            } else {
                let max = 0;
                for (let i = 0; i < array.length; i++) { //recorremos el array
                    if (array[i] > max) { //Si el valor es mayor que el maximo le ponemos ese valor
                        max = array[i];
                    }
                }

                document.getElementById("maxEl").textContent = max;
            }
        }

        function ordenarArray() {
            if (array.length == 0) {
                alert("No se ha generado el array");
            } else {
                array.sort(function (n1, n2) {
                    return n1 - n2; //Se hace esta funcion por que sort ordena alfabeticamente
                });

                document.getElementById("orArray").textContent = array;
            }
        }

        function buscarenArray() {
            if (array.length == 0) {
                alert("No se ha generado el array");
            } else {
                //Le preguntamos al usuario que valor busca
                let busqueda = parseInt(prompt("¿Que valor quieres buscar?"));
                if (isNaN(busqueda)) {
                    alert("No me has pasado un numero valido");
                } else {
                    for (let i = 0; i < array.length; i++) {
                    if (busqueda == array[i]) {
                        document.getElementById("enArray").textContent += " Posicion: " + i;
                    }
                }
                if (document.getElementById("enArray").textContent == '') { //Si no encontrara nada, escribimos que no se ha encontrado nada en el array
                    document.getElementById("enArray").textContent = "No se ha encontrado lo que buscabas en el array";
                }
                }
                
            }
        }

        function borrarEl() {
            if (array.length == 0) {
                alert("No se ha generado el array");
            } else {
                //Si se ha generado el array, pedimos la posicion
                let posicion = parseInt(prompt("Introduce la posicion que quieres borrar"));
                if (isNaN(posicion)) {
                    alert("No me has pasado un numero");
                } else {
                    if (posicion > array.length - 1) { //Si nos da una posicion que no existe en el array se lo decimos al usuario
                        alert("Esta posicion no existe");
                    } else {
                        array.splice(posicion, 1);
                        document.getElementById("borrayArray").textContent = array;
                    }
                }
            }
        }

        function invertirOrden() {
            if (array.length == 0) {
                alert("No se ha generado el array");
            } else {
                array.reverse(function (n1, n2) {
                    return n2 - n1; //Lo mismo que sort, pero con reverse
                });

                document.getElementById("invArray").textContent = array;
            }
        }

        function rotarEl() {
            if (array.length == 0) {
                alert("No se ha generado el array");
            } else {
                //Le pedimos al usuario el numero de rotaciones
                let rotaciones = parseInt(prompt("¿Cuantas veces quieres rotar el array?"));

                for (let i = 0; i < rotaciones; i++) {
                    array.unshift(array, array.splice(1, array.length)) //Esto añade al principio, el array entero y luego elimina los valores del array menos el 1ero
                }
                document.getElementById("rotarArray").textContent = array
            }
        }

        function nuevoArraysinRepe() {
            if (array.length != 0) {
                array.sort(function (n1, n2) {
                    return n1 - n2;
                }); //Primero lo ordenamos para que los valores iguales esten juntos (si hay 2 '49' los ordenamos para que esten separadas por 1 posicion)

                let i = 0;
                while (i < array.length) {
                    if (array[i + 1] == array[i]) { //Si el siguiente valor es el mismo que el actual
                        array.splice(i, 1); //Lo borramos
                    } else { //Si no
                        i++; //Vamos a la siguiente posicion
                    }
                }
                document.getElementById("nuevoArray").textContent = array;
            } else {
                alert("Ya se ha creado el array");
            }
        }
    </script>
</head>

<body onload="iniciar()">
    <button id="gen">Generar Array</button>
    <br>
    <button id="visMayor">Mostrar el mayor elemento</button>
    <p id="maxEl"></p>
    <br>
    <button id="orden">Ordenar Array</button>
    <p id="orArray"></p>
    <br>
    <button id="buscar">Buscar en el Array</button>
    <p id="enArray"></p>
    <br>
    <button id="borrar">Borrar elemento del Array</button>
    <p id="borrarArray"></p>
    <br>
    <button id="invert">Invertir Orden Array</button>
    <p id="invArray"></p>
    <br>
    <button id="rotar">Rotar elemento</button>
    <p id="rotarArray"></p>
    <br>
    <button id="nuevoSinRepe">Nuevo array sin repetir numeros</button>
    <p id="nuevoArray"></p>
</body>

</html>