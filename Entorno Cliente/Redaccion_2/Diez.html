<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 10</title>
</head>

<body>
    <script type="text/javascript">
        //Cojemos las variables para dia mes y año
        let dia = prompt("Introduce el dia");
        let mes = prompt("Introduce el mes");
        let anio = prompt("Introduce el año");

        //Guardamos en un array los meses, tal y como pide el ejercicio
        let meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre",
            "Noviembre", "Diciembre"
        ];

        if (!comprobarFecha(dia, mes, anio)) { //Antes de hacer calculos, vamos a comprobar que la fecha es correcta
            //Si NO es correcta, entonces mostramos un mensaje diciendolo
            alert("La fecha no es correcta");
        } else {
            //En caso contrario llamamos a la funcion correspondiente
            calcularFecha(dia, mes, anio);
        }



        /*
        E: Dia, mes y anio (string)
        S: Boolean que muestra si la fecha es correcta o no
        */

        function comprobarFecha(dia, mes, anio) {
            //Parseamos a enteros las variables anteriores
            let diareal = parseInt(dia);
            let mesreal = parseInt(mes);
            let anioreal = parseInt(anio);

            /*
            Ahora hay que comprobar, segun el mes, cuantos dias tiene:
            Si el mes es 1, 3, 5, 7, 8, 10 o 12; el dia maximo es 31
            Si el mes 4, 6, 9, 11; el dia maximo es 30
            Si el mes es 2; hay que además comprobar que el año sea bisiesto; El dia maximo es 28 o 29 si es bisiesto
            */

            switch (mesreal) {
                case 1:
                case 3:
                case 5:
                case 7:
                case 8:
                case 10:
                case 12:
                    if (diareal < 1) { //Si entramos aqui, comprobamos que el dia ni sea menor a 1 o mayor a 31
                        return false;
                        break;
                    } else if (diareal > 31) {
                        return false;
                        break;
                    }
                    //Si ninguna de las condiciones es activada, la fecha es correcta
                    return true;
                    break;
                case 4:
                case 6:
                case 9:
                case 11:
                    if (diareal < 1) { //Si entramos aqui, comprobamos que el dia ni sea menor a 1 o mayor a 30
                        return false;
                        break;
                    } else if (diareal > 30) {
                        return false;
                        break;
                    }
                    //Si ninguna condicion se activa entonces la fecha es correcta
                    return true;
                    break;
                case 2:
                    //Si entramos aqui lo primero que comprobamos es que el año sea bisiesto o no
                    if (esBisiesto(anioreal)) {
                        if (diareal < 1) { //Si es bisiesto comprobamos que dia ni sea menor a 1 o mayor a 29
                            return false;
                            break;
                        } else if (diareal > 29) {
                            return false;
                            break;
                        }
                        //Si es bisiesto y no se activan ninguna de las condiciones, la fecha es correcta
                        return true;
                        break;
                    } else {
                        if (diareal <
                            1) { //Si estamos aqui, el año no es bisiesto, hay que comprobar que ni dia sea menor a 1 o mayor a 28
                            return false;
                            break;
                        } else if (diareal > 28) {
                            return false;
                            break;
                        }
                        //Si ninguna condicion se activa, la fecha es correcta
                        return true;
                    }
                    break;
                default:
                    //Si se ha escrito otro mes que no se corresponda entonces el mes es incorrecto
                    return false;
                    break;
            }

        }

        /*
        E: Anio
        S: Boolean que dice si un año es bisiesto o no
        */
        function esBisiesto(anio) {
            //Un año es bisiesto si se puede dividir por 4 o por 400, pero no por 100
            if (anio % 4 == 0 && !(anio % 100 == 0 && anio % 400 != 0)) {
                return true;
            }
            return false;
        }

        function calcularFecha(d, m, a) {
            //Parseamos los datos a enteros ya que nos llega un String
            let diareal = parseInt(d);
            let mesreal = parseInt(m);
            let anioreal = parseInt(a);

            //Cojemos el mes real. Le quitamos 1 para que coincida con el mes (Si no se quitara 1 se iria un mes hacia delante)
            let mes = meses[mesreal - 1];
            //Vamos a usar una funcion para poner un 0 a la izquierda, pero antes vamos a comprobar de que su longitud es 2
            if (diareal.toString().length == 2) {
                //Si NO es el caso, no hace falta poner 0 a la izq e imprimimos
                document.write("Dia " + diareal + " de " + mes + " de " + anioreal);
            } else {
                //Pero si es el caso, creamos una variable que arregla el dia poniendo un 0 a la izquierda
                let diafx = ceroAlaIzq(diareal);
                // E imprimimos
                document.write("Dia " + diafx + " de " + mes + " de " + anioreal);

            }


        }


        function ceroAlaIzq(m) {
            //Creamos una string que añade "0" (no es lo mismo que 0 ya que js concatena strings)
            /*let cero = "0";
            let cerfix = cero.repeat(1); //Cerfix llama a una funcion repeat, que repite la cadena, tantas veces como se indique
            cerfix += m; //Lo sumamos al dia que ahora tiene el 0 a la izquierda

            return cerfix; //Lo devolvemos
            */
           //Devolvemos "0" sumado a m
            return "0" + m;
        }
    </script>
</body>

</html>