<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 2</title>
    <script src="../src/eventos.js"></script>
    <script>
        //Cuando carga la pagina iniciamos la funcion iniciar
        window.addEventListener("load", iniciar);

        function iniciar() {
            //Añadimos los eventos correspondientes
            document.getElementById("crearLink").addEventListener("click", creaA);
            document.getElementById("añadirBr").addEventListener("click", aniadirBr);
            document.getElementById("contar").addEventListener("click", cuentaPalabras);
            document.getElementById("cambiar").addEventListener("click", cambiarColor);
        }

        function creaA() {
            //Le preguntamos al usuario por un enlace y un mensaje
            let enlace = prompt("¿Donde quieres que lleve al enlace? (inserta la url completa si es posible)");
            let mensaje = prompt("¿Quieres que tenga un texto? (deja esto vacio si no)");
            //Creamos entonces un enlace con la funcion dada
            let a = createLink(enlace, mensaje);
            //Buscamos el segundo parrafo
            let parrafo = document.getElementsByTagName("p")[1];
            //El cual añade el enlace al final de este
            parrafo.appendChild(a);
        }

        function aniadirBr() {
            //Primero buscamos los parrafos
            let parrafos = document.getElementsByTagName("p");
            for (let i = 0; i < parrafos.length; i++) {
                //Para cada parrafo llamamos a la funcion que añade los br
                let nuevoTexto = createBr(parrafos[i].innerText);
                //Modificamos el innerHTML que añade estos br
                parrafos[i].innerHTML = nuevoTexto;
            }  
        }

        function cuentaPalabras() {
            //Guardamos los parrafos
            let parrafos = document.getElementsByTagName("p");
            //Guardamos los resultados en un array
            let totalPalabras = [];
            for (let i = 0; i < parrafos.length; i++) { //Para cada parrafo
                //Guardamos su texto
                let texto = parrafos[i].textContent;
                //Y contamos sus palabras
                let total = countWords(texto);
                //Guardamos el resultado en el array vacio
                totalPalabras[i] = "Hay un total de " + total + " palabras en el parrafo " + (i+1);
            }
            //Por ultimo creamos una lista y añadimos esta al documento
            let lista = crearLista(totalPalabras, true);
            document.body.appendChild(lista);
        }

        function cambiarColor() {
            //Guardamos el parrafo
            let parrafo = document.getElementsByTagName("p")[1];
            //Le cambiamos el color a rojo
            let color = cambioFondo(parrafo, "red");
            //Y cambiamos el estilo
            parrafo.style.backgroundColor = color;
        }
    </script>
</head>
<body>
    <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Adipisci quis necessitatibus dolores. 
        Magni voluptate est recusandae libero repellendus adipisci, 
        possimus eligendi, magnam ducimus facilis iure vero distinctio 
        minus id corporis.
    </p>
    <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Delectus veritatis magnam quas odit id quod suscipit perferendis, 
        necessitatibus fuga, voluptate, enim obcaecati commodi consequuntur 
        ab accusamus! Sapiente nihil ducimus laudantium.
    </p>
    <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Unde pariatur delectus ad, cum harum similique, 
        vitae mollitia aspernatur obcaecati perferendis 
        quod rerum alias est possimus illum quis praesentium. 
        Possimus, culpa.
    </p>
    <button id="crearLink">Crear un Enlace despues de segundo parrafo</button>
    <button id="añadirBr">Añadir espacios despues de punto</button>
    <button id="contar">Contar Palabras</button>
    <button id="cambiar">Camibar Color del segundo parrafo</button>
</body>
</html>