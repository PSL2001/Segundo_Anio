<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 1</title>
    <script src="../src/eventos.js"></script>
    <script src="../src/validaciones.js"></script>
    <script>
        //Cuando carga la ventana se llama a esta funcion
        window.addEventListener("load", iniciar);

        function iniciar() {
            //En esta funcion definimos los eventos
            document.getElementById("enviar").addEventListener("click", validar);
            let inputs = document.getElementsByTagName("input");
            for (let i = 0; i < inputs.length; i++) {
                inputs[i].addEventListener("keypress", siguienteCampo);
                inputs[i].addEventListener("mouseover", cambiarColor);
                inputs[i].addEventListener("mouseout", cambiarColor);
            }
        }

        function validar() {
            //Guardamos los inputs
            let identificador = document.getElementById("ident");
            let titulo = document.getElementById("tit");
            let nombre = document.getElementById("fich");
            //Y comprobamos que cada campo sigue la expresion dada
            //Identificador espera 4 Mayusculas, 2 digitos y 2 minusculas (ABCD12ab)
            if (validateExpresion(identificador.value, /[A-Z]{4}[0-9]{2}[a-z]{2}/) == false) {
                cambiaColor(identificador, "red");
                return false;
            } else {
                cambiaColor(identificador, "white");
            }
            //Titulo espera cualquier letra
            if (validateExpresion(titulo.value, /[a-zA-Z]/) == false) {
                cambiaColor(titulo, "red");
                return false;
            } else {
                cambiaColor(titulo, "white");
            }
            //Y nombre espera cualquier letra seguido de .zip/.html/.js (uno.html)
            if (validateExpresion(nombre.value, /\w+(?=\.zip)|(?=\.html)|(?=\.js)/g) == false) {
                cambiaColor(nombre, "red");
                return false;
            } else {
                cambiaColor(nombre, "white");
            }

        }

        function cambiarColor(event) {
            //Cojemos el input que ha disparado el evento
            let input = event.target;
            //Y el tipo de evento que lo ha activado
            let trigger = event.type;
            if (trigger == "mouseover") { //Dependiendo del evento, cambia el color de fondo 
                cambiaColor(input, "green");
            } else if (trigger == "mouseout") {
                cambiaColor(input, "white");
            }
        }
    </script>
</head>
<body>
    <label for="ident">Identificador de Ejercicio</label>
    <input type="text" id="ident">
    <br>
    <label for="tit">Titulo del Ejercicio</label>
    <input type="text" id="tit">
    <br>
    <label for="fich">Nombre del Fichero</label>
    <input type="text" id="fich">
    <br>
    <button id="enviar">Enviar</button>
</body>
</html>